<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CalambaGO! - A CalaMap of INNOViGATION</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Dancing+Script&family=Great+Vibes&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body onload="document.dispatchEvent(new Event('DOMContentLoaded'));">
    
     <!-- Navigation Bar -->
     <div class="navbar">
        <div class="icon">
            <h2 class="logo">Calamba<span style="color: #91b5dd; font-weight: bolder; font-family: 'Dancing Script', cursive; font-size: 40px;">GO!</span></h2>
        </div>
        
        <div class="navbar-left">
            <b><a href="#home" data-lang-en="Home" data-lang-tl="Bahay">Home</a></b>
            <b><a href="#famous-places" data-lang-en="Famous Places" data-lang-tl="Sikat na Lugar">Famous Places</a></b>
            <b><a href="#about" data-lang-en="About" data-lang-tl="Tungkol">About</a></b>
            <b><a href="#contact" data-lang-en="Contact" data-lang-tl="Makipag-ugnayan">Contact</a></b>
        </div>

        <div class="navbar-right">
             
            <!-- Search Bar -->
             <form class="search-bar" action="https://www.google.com/search" method="get">
                <div class="input-group">
                    <input type="text" name="q" class="search-input" placeholder="Search..." required>
                    <button type="submit" class="search-button">
                        <i class="fa-solid fa-magnifying-glass"></i>
                    </button>
                </div>
            </form>


            <div class="profile-dropdown">
                <div onclick="toggle()" class="profile-dropdown-btn">
                  <div class="profile-img">
                    <i class="fa-solid fa-circle"></i>
                  </div>
        
                  <span
                    >ITMAWD22
                    <i class="fa-solid fa-angle-down"></i>
                  </span>
                </div>
        
                <ul class="profile-dropdown-list">
                  <li class="profile-dropdown-list-item">
                    <a href="profile.html">
                      <i class="fa-regular fa-user"></i>
                      Edit Profile
                    </a>
                  </li>
        
                  <li class="profile-dropdown-list-item">
                    <a href="inbox.html">
                      <i class="fa-regular fa-envelope"></i>
                      Inbox
                    </a>
                  </li>
        
                  <li class="profile-dropdown-list-item">
                    <a href="featserv.html">
                      <i class="fa-regular fa-circle-question"></i>
                      Features & Services
                    </a>
                  </li>
                  <hr />
        
                  <li class="profile-dropdown-list-item">
                    <a href="cover.html">
                      <i class="fa-solid fa-arrow-right-from-bracket"></i>
                      Log out
                    </a>
                  </li>
                </ul>
              </div>
        </div>
     </div>

    <!-- Add spacer to push content below navbar -->
    <div style="height: 70px;"></div>

    <!-- Google Maps Embed -->
        <div class="map-container" id="home">
            <iframe src="PRACTICE.html"></iframe>
        </div>

    <div class="calendar">
        <iframe src="manzanero.html"></iframe>
    </div>

    <!-- Famous Places Section -->
    <section class="famous-places" id="famous-places">
        <!-- Will be filled by JS from backend -->
    </section>

   
    <!-- Optional: About Section -->
     <div class="section">
    <section class="famous-places" id="about">
        <div class="style"><h2 data-lang-en="About CalambaGO!" data-lang-tl="Tungkol sa CalambaGO!">About CalambaGO!</h2></div>
        <p data-lang-en="CalambaGO! is your GO-to guide for discovering the best that Calamba has to offer. From historical landmarks to vibrant local businesses, our platform provides comprehensive information to help you navigate and enjoy the city to the fullest." data-lang-tl="Ang CalambaGO! ang iyong gabay para tuklasin ang pinakamaganda na inaalok ng Calamba. Mula sa mga makasaysayang pook hanggang sa masiglang lokal na negosyo, nagbibigay ang aming plataporma ng komprehensibong impormasyon upang matulungan kang mag-navigate at tamasahin ang lungsod nang lubos.">CalambaGO! is your GO-to guide for discovering the best that Calamba has to offer. From historical landmarks to vibrant local businesses, our platform provides comprehensive information to help you navigate and enjoy the city to the fullest.</p>
    </section>

    <!-- Optional: Contact Section -->
    <section class="famous-places" id="contact">
        <div class="style"><h2 data-lang-en="Contact Us" data-lang-tl="Makipag-ugnayan sa Amin">Contact Us</h2></div>
        <p data-lang-en="Have questions or need more information? Reach out to us at infocalambaGO@gmail.com" data-lang-tl="May mga tanong o kailangan mo pa ng karagdagang impormasyon? Makipag-ugnayan sa amin sa infocalambaGO@gmail.com" Have questions or need more information? Reach out to us at infocalambaGO@gmail.com </p>
    </section>
    </div>

    <div class="icons-bar">
        <div class="icons">
            <a href="#"><ion-icon name="logo-facebook"></ion-icon></a>
            <a href="#"><ion-icon name="logo-instagram"></ion-icon></a>
            <a href="#"><ion-icon name="logo-twitter"></ion-icon></a>
            <a href="#"><ion-icon name="logo-google"></ion-icon></a>
            <a href="#"><ion-icon name="logo-skype"></ion-icon></a>
        </div>
    </div>

   <!-- Journal Button -->
   <div id="journal-container">
    <button id="journal-button">Open Journal</button>
    <div id="journal-entry">
        <input type="text" id="journal-title" placeholder="Title of your entry..." />
        <textarea id="journal-text" placeholder="Write about your journey..."></textarea>
        <button id="save-journal">Save</button>
        <button id="close-journal">Close</button>
        <div class="saved-entries" id="saved-entries">
            <!-- Saved entries will be displayed here -->
        </div>
    </div>
</div>

        
            <!-- Leaflet JS -->
            <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script src="index.js"></script>
<script>
// filepath: c:\Users\CVDPS\OneDrive\Documents\GitHub\Mapapp\index.html
// Journal API integration
document.addEventListener('DOMContentLoaded', function() {
    const journalButton = document.getElementById("journal-button");
    const journalEntry = document.getElementById("journal-entry");
    const journalTitle = document.getElementById("journal-title");
    const journalText = document.getElementById("journal-text");
    const savedEntries = document.getElementById("saved-entries");

    // Load journals from API
    async function loadJournals() {
        savedEntries.innerHTML = '';
        try {
            const res = await fetch('api.php?endpoint=journals');
            const data = await res.json();
            data.forEach(entry => {
                addSavedEntry(entry);
            });
        } catch (e) {
            savedEntries.innerHTML = '<div>Could not load journal entries.</div>';
        }
    }

    // Save journal to API
    document.getElementById("save-journal").addEventListener("click", async () => {
        const title = journalTitle.value.trim();
        const text = journalText.value.trim();
        if (!title || !text) {
            alert("Please fill in both the title and the journal text.");
            return;
        }
        try {
            const res = await fetch('api.php?endpoint=journals', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ title, text })
            });
            const result = await res.json();
            if (result.success) {
                journalTitle.value = "";
                journalText.value = "";
                loadJournals();
            } else {
                alert(result.error || 'Failed to save journal.');
            }
        } catch (e) {
            alert('Failed to save journal.');
        }
    });

    // Delete journal from API
    savedEntries.addEventListener('click', async function(e) {
        if (e.target.classList.contains('delete-entry')) {
            const entryDiv = e.target.closest('.entry');
            const id = entryDiv.getAttribute('data-id');
            if (id && confirm('Delete this entry?')) {
                try {
                    const res = await fetch('api.php?endpoint=journals&id=' + id, { method: 'DELETE' });
                    const result = await res.json();
                    if (result.success) {
                        loadJournals();
                    } else {
                        alert(result.error || 'Failed to delete journal.');
                    }
                } catch (e) {
                    alert('Failed to delete journal.');
                }
            }
        }
    });

    // Add entry to DOM
    function addSavedEntry(entry) {
        const entryDiv = document.createElement("div");
        entryDiv.className = "entry";
        entryDiv.setAttribute('data-id', entry.id);
        entryDiv.innerHTML = `
            <div class="entry-header">
                <span class="entry-title">${entry.title} (${entry.date})</span>
                <button class="delete-entry">Delete</button>
            </div>
            <div class="entry-details" style="display: none;">
                <textarea readonly>${entry.text}</textarea>
            </div>
        `;
        entryDiv.addEventListener("click", function(e) {
            if (!e.target.classList.contains('delete-entry')) {
                const details = entryDiv.querySelector(".entry-details");
                details.style.display = details.style.display === "none" ? "block" : "none";
            }
        });
        savedEntries.appendChild(entryDiv);
    }

    // Initial load
    loadJournals();
});
</script>
</body>
</html>

